"use strict";exports.__esModule=!0,exports.computeSortList=exports.sort=void 0;var sBY=function(r,t,e,o){return t=t[r],o=o[r],"string"!=typeof t&&"string"!=typeof o||(t=normalizeWhenDiacritics(t),o=normalizeWhenDiacritics(o)),">"===e?t<o?1:-1:"<"!==e||o<t?1:-1},normalizeWhenDiacritics=function(r){return hasDiacritics(r)?r.normalize("NFD").replace(/[\u0300-\u036f]/g,""):r},hasDiacritics=function(r){return 122<r.split("").map(function(r){return r.charCodeAt(0)}).sort(function(r,t){return t-r})[0]},errorOnWrongSortString=function(r){return"\nSORTSTRING_MATCH_ERROR\nYou have to precise a sortString formated like this :\n\"by < key > of < a > < greater| lower |< | > > than < b >'s [then]\n"+('You may have given a wrong "key" (a field) to focus on. \n'+('\nIn your case, the "key" string should be eater: \n>'+r.sort().join(" or ")+"<"))+"\n\n"+("Write your sort string like this:\n\n`\nby "+r[0]+" of a greater than b's then \nby otherField of a > than b's ...\n`")+"\n"},computeSortList=function(r,t){var e,o,n=[],i=0,t=t.join("|"),s=new RegExp("by ("+t+") of (a|b) ([><]|(?:lower|greater)) than (b|a)'s(?: (then))?","gm"),a=!1;do{}while(!(e=s.exec(r))||!a&&i++||(o=e[3].replace("greater",">").replace("lower","<"),o={by:e[1],left:e[2],direction:o,right:e[4]},n.push(o),a=void 0!==e[5]),e&&i<999);return n};exports.computeSortList=computeSortList;var sort=function(r,t,e,o){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===o&&(o=console.error);var n=[];r.length&&(n=Object.keys(r[0]));var i=computeSortList(t,n);if(t.length&&!i.length){n=errorOnWrongSortString(n);if(e)throw n;o(n)}return sortCore(r,i,0)};exports.sort=sort;var sortCore=function(r,t,e){if(!(t=void 0===t?[]:t)[e=void 0===e?0:e])return r;var o=t[e],n=o.by,i=o.left,s=o.direction,a=o.right,r=r.sort(function(r,t){return i===a?1:"a"===i?sBY(n,r,s,t):sBY(n,t,s,r)});return sortCore(r,t,e+1)};